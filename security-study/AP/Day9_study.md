## 📚 今日の学習テーマ：設計手法（構造化・オブジェクト指向） — クラス・モジュール分割、設計原則（高凝集・低結合）を図で整理

### 📝 学習の目標

* 構造化設計とオブジェクト指向設計の基本的な考え方の違いを理解する。
* モジュール分割やクラス設計における適切な粒度と役割分担を習得する。
* 「高凝集・低結合」といった設計原則が、システムの保守性や拡張性にどのように寄与するかを整理する。

### 🔍 カバーする範囲

本日は、ソフトウェア設計の核心である設計手法について学習します。大規模なシステムを効率的に開発・保守するために、機能を適切な単位に分割する構造化設計と、データと手続きを一体化して扱うオブジェクト指向設計の両面からアプローチします。また、実務で良質なコードを書くための指針である「高凝集・低結合」の概念を深く掘り下げます。

## 📖 解説パート

### 構造化設計とモジュール分割の原則

構造化設計は、複雑なシステムを「機能」という単位で段階的に細分化していく手法です。この手法において、システムの良し悪しを判断する重要な指標が「モジュール独立性」です。モジュール独立性は、「凝集度（Cohesion）」と「結合度（Coupling）」の二つの概念で評価されます。

実務において目指すべきは、**「高凝集（High Cohesion）」**かつ**「低結合（Low Coupling）」**な状態です。凝集度とは、一つのモジュール内にある機能がどれだけ密接に関連しているかを示す尺度です。一つのモジュールが一つの明確な役割（単一責任）を果たすとき、凝集度は高くなり、修正が他の機能に影響しにくくなります。一方、結合度はモジュール同士の依存関係の強さを示します。結合度が低い、すなわち他モジュールの内部実装を知らなくても利用できるインターフェースが確立されている状態では、一部の変更がシステム全体に波及する「スパゲッティコード化」を防ぐことができます。要求から設計へと進むプロセスの中で、これらの指標を意識してモジュールを分割することが、保守性の高いシステム構築の第一歩となります。

### オブジェクト指向設計とクラスの役割

オブジェクト指向設計は、現実世界の「もの（オブジェクト）」に着目し、関連するデータ（属性）とそれに対する操作（手続き）を一つの単位としてまとめて扱う設計手法です。この際、オブジェクトの設計図として定義されるのが「クラス」です。

オブジェクト指向の大きな特徴は、**「カプセル化」**、**「継承」**、**「ポリモーフィズム（多態性）」**の三要素にあります。カプセル化によってデータへの直接的なアクセスを制限し、決められたメソッドを通じてのみ操作を許容することで、情報の隠蔽とデータの整合性維持が可能になります。また、クラスを適切に分割し、関連する振る舞いを整理することで、構造化設計で重要視された「高凝集・低結合」をより直感的に実現できます。実務では、一つのクラスが巨大化しすぎる「神クラス（God Class）」を避け、役割ごとにクラスを分割することが推奨されます。設計原則であるSOLID原則などを適用することで、将来的な仕様変更や機能拡張に対しても、既存コードへの影響を最小限に抑えながら柔軟に対応できるアーキテクチャを構築できるようになります。

#### 重要ポイント

* **高凝集・低結合**：モジュールやクラスの独立性を高め、保守性を向上させるための最重要原則である。
* **カプセル化**：データと手続きを一体化し、内部実装を隠蔽することで、モジュール間の依存度を下げる。
* **単一責任の原則**：一つのモジュールやクラスには、一つの明確な責任（役割）を持たせるべきである。

## 🏢 ケーススタディ

### ケース：機能追加のたびにバグが連鎖する「巨大クラス」の末路

ある業務システムにおいて、数千行に及ぶ一つのクラスが「注文」「在庫」「配送」のすべてのロジックを管理していました。特定の割引計算ロジックを修正したところ、全く関係のない配送処理でエラーが発生し、修正の影響範囲が誰にも把握できない状態に陥りました。

#### 問題点

* クラスの凝集度が著しく低く、複数の異なる役割が一つの場所に混在している（低凝集）。
* 各機能が互いの内部データに直接依存しており、一つの変更が全体に波及する（強結合）。
* クラスが巨大化（神クラス化）しており、設計の意図やデータフローの可視性が失われている。

#### 対応策

* 構造化・オブジェクト指向の原則に基づき、クラスを「注文管理」「在庫管理」「配送管理」へと責務ごとに分割（リファクタリング）する。
* 各クラス間のやり取りは、公開されたインターフェース（メソッド）経由のみに限定し、カプセル化を徹底する。
* 共通のビジネスルールを別モジュールとして抽出し、高凝集な部品として再定義する。

#### ケースから学ぶ教訓

* 設計段階での「モジュール分割」を怠ると、時間の経過とともに保守コストが爆発的に増加する。
* 「高凝集・低結合」は単なる理論ではなく、実務におけるバグ混入リスクを低減するための実利的な指針である。

## 📝 理解度チェックテスト

以下の問題を解いて、今日の学習内容の理解度をチェックしましょう。

### 問題1
モジュール内の機能的な関連性の強さを示す指標を何と呼ぶか。
1. 結合度
2. **凝集度**
3. 複雑度
4. 網羅度

### 問題2
オブジェクト指向において、データとそれに対する操作を一つにまとめ、外部から直接参照できないようにすることを何と呼ぶか。
1. 継承
2. **カプセル化**
3. 多態性
4. 抽象化

### 問題3
モジュール独立性が最も高いとされる、理想的な組み合わせはどれか。
1. 低凝集・低結合
2. 高凝集・高結合
3. **高凝集・低結合**
4. 低凝集・高結合

### 問題4
構造化設計において、トップダウンで機能を細分化していく際、最優先で意識すべきことは何か。
1. 実行速度の最大化
2. **モジュール間の依存関係の最小化**
3. プログラム行数の削減
4. ハードウェアへの直接アクセス

### 問題5
一つのクラスが多すぎる役割を持ち、システム全体のロジックが集中してしまっている状態を指す用語はどれか。
1. インスタンス
2. **神クラス（God Class）**
3. コンストラクタ
4. サブクラス

## 📋 今日のまとめ

* ソフトウェア設計の良し悪しは、**高凝集・低結合**の実現度合いによって決まる。
* 構造化設計は**機能分割**を、オブジェクト指向は**データと手続きの統合**を軸に、システムの複雑さを制御する。
* 実務においては、一つの部品に一つの役割を持たせることが、変更に強い柔軟なシステムを作る鍵となる。

### 次回予告

明日は「**Day 10：設計パターンとアーキテクチャの概念** — 代表的なパターン（Factory、Observer、MVC等）と適用例」について学習します。

## ✅ テスト回答・解説

### 問題1 正解：2. 凝集度
解説：凝集度は、モジュール内部の構成要素がどれだけ特定の目的のためにまとまっているかを示します。これが高いほど、そのモジュールの役割が明確であることを意味します。

### 問題2 正解：2. カプセル化
解説：カプセル化は、データとその操作を一体化し、内部の仕組みを隠すことで、外部からの不適切な操作を防ぎ、依存関係を整理します。

### 問題3 正解：3. 高凝集・低結合
解説：各部品の役割が明確（高凝集）で、かつ部品同士の依存が少ない（低結合）状態が、最も変更に強く保守しやすい設計です。

### 問題4 正解：2. モジュール間の依存関係の最小化
解説：構造化設計では、複雑さを管理するためにモジュール独立性を高めることが重要であり、結合度を下げることがその核心となります。

### 問題5 正解：2. 神クラス（God Class）
解説：一つのクラスに多くの責務を持たせすぎることは、低凝集・強結合を招き、保守性を著しく低下させる典型的なアンチパターンです。

## 📚 参考資料・リソース

* 『プログラミングコンテスト攻略のためのアルゴリズムとデータ構造』（設計の基礎知識）
* 『ソフトウェア設計の原則』（高凝集・低結合の詳説）
* 応用情報技術者試験シラバス（ソフトウェア設計分野）
