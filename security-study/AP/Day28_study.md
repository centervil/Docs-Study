## 📚 今日の学習テーマ：統合演習（設計課題）

### 📝 学習の目標

* 機能要件および非機能要件に基づいたシステムアーキテクチャ図の作成
* データフロー図を用いたデータ連携の可視化
* セキュリティ制御の設計と実装方法の検討

### 🔍 カバーする範囲

本日の学習では、これまでに学んだ知識を統合し、架空のシステム開発における設計課題に取り組みます。具体的には、提示された要求仕様（機能・非機能）を理解し、それらを満たすためのアーキテクチャ図、データフロー図、そしてセキュリティ制御を設計します。

## 📖 解説パート

### システム要求定義からの設計

システム設計は、まず明確な要求定義から始まります。要求には、ユーザーがシステムで実現したい「機能要件」と、システムの品質や運用に関する「非機能要件」があります。

**機能要件**は、システムが提供すべき具体的な機能（例：ユーザー登録、商品検索、決済処理）を定義します。これらは、ユーザーのニーズを直接満たす部分です。

一方、**非機能要件**は、システムの性能、可用性、拡張性、セキュリティ、保守性、運用性などを定義します。これらは、システムが「どのように」動作すべきか、あるいは「どのような品質」を持つべきかを示します。例えば、「99.9%の可用性を確保する」「レスポンスタイムを2秒以内にする」「不正アクセスからデータを保護する」といった要件です。

これらの要求を正確に理解し、システム全体の設計に落とし込むことが、成功するシステム開発の鍵となります。特に、非機能要件は、アーキテクチャの選択や技術スタックの決定に大きく影響します。

### アーキテクチャ図、データフロー図、セキュリティ制御の設計

要求定義に基づき、具体的な設計を進めます。

1.  **アーキテクチャ図**: システム全体の構成要素（サーバ、データベース、ロードバランサ、APIゲートウェイなど）とその関係性を視覚的に表現します。どのようなコンポーネントを、どのように配置し、連携させるかを定義します。非機能要件（可用性、拡張性、性能など）を満たすための構成パターン（例：冗長化、レプリケーション、キャッシュ戦略）を検討し、図に反映させます。

2.  **データフロー図**: システム内でデータがどのように生成、保存、処理、転送されるかを表現します。データの流れを追うことで、各処理の依存関係や、データの一貫性を保つための仕組み（トランザクション管理、バリデーション）を明確にします。

3.  **セキュリティ制御**: システムの各レイヤー（ネットワーク、アプリケーション、データ）におけるセキュリティ対策を設計します。認証・認可、アクセス制御、暗号化（通信、保存データ）、脆弱性対策（OWASP Top Tenなどを参考に）、ログ監視などを具体的に検討し、図やドキュメントに落とし込みます。

これらの設計成果物は、開発チーム全体で共有され、開発、テスト、運用の各フェーズで参照される重要なドキュメントとなります。

#### 重要ポイント

*   機能要件と非機能要件を区別し、両方をバランス良く考慮する。
*   アーキテクチャ図でシステム全体の構造を把握し、非機能要件との整合性を確認する。
*   データフロー図でデータの流れを可視化し、処理の妥当性や一貫性を確保する。
*   セキュリティはシステム設計の初期段階から考慮し、各レイヤーで適切な対策を講じる。

## 🏢 ケーススタディ

### ケース：オンライン書店システムの新機能開発

あるオンライン書店が、ユーザーが購入した書籍の関連書籍を推薦する新機能の開発を計画しています。この機能は、ユーザーの購買履歴と閲覧履歴を分析し、パーソナライズされた推薦リストを生成するものです。非機能要件として、推薦処理はリアルタイムに近い応答性（3秒以内）、高い可用性（99.95%）、およびユーザーデータのプライバシー保護が求められています。

#### 問題点

*   大量のユーザーデータと購買履歴データから、効率的に関連書籍を分析・推薦するアルゴリズムの選定と実装。
*   リアルタイムでの推薦生成と、既存のシステム（商品検索、カート機能）との連携。
*   ユーザーのプライバシーに配慮しつつ、パーソナライズされた推薦を実現するためのデータ管理とアクセス制御。

#### 対応策

*   分散処理フレームワーク（例：Apache Spark）を用いて、購買履歴・閲覧履歴のバッチ処理とリアルタイム分析基盤を構築する。
*   推薦アルゴリズム（協調フィルタリング、コンテンツベースフィルタリングなど）を評価・選定し、APIとして提供する。
*   APIゲートウェイを導入し、推薦APIへのアクセスを管理し、既存システムとの疎結合な連携を実現する。
*   ユーザーデータへのアクセスは最小限に留め、暗号化を施し、厳格なアクセス権限管理を行う。

#### ケースから学ぶ教訓

*   新しい機能開発においては、機能要件だけでなく、性能や可用性といった非機能要件がシステム全体の設計に大きく影響する。
*   大量データを扱う場合、効率的なデータ処理基盤とアルゴリズムの選定が不可欠である。
*   セキュリティとプライバシーは、設計の初期段階から組み込むべき重要な要素である。

## 📝 理解度チェックテスト

以下の問題を解いて、今日の学習内容の理解度をチェックしましょう。

### 問題1

システム設計における「機能要件」と「非機能要件」に関する説明として、最も適切なものはどれか。

1.  機能要件はシステムの性能や可用性を定義し、非機能要件はユーザーが直接利用する機能を定義する。
2.  機能要件はシステムの内部的な処理ロジックを定義し、非機能要件は外部から見えるユーザーインターフェースを定義する。
3.  機能要件はシステムが「何を」行うかを定義し、非機能要件はシステムが「どのように」動作するか、あるいは「どのような品質」を持つかを定義する。
4.  機能要件と非機能要件は区別されず、両方ともシステムが提供すべき機能の総称である。

### 問題2

システムアーキテクチャ図を作成する主な目的は何か。

1.  データベースのスキーマを詳細に定義するため。
2.  システム全体の構成要素とその関係性を視覚化し、設計の妥当性を確認するため。
3.  個々のプログラムコードの記述方法を標準化するため。
4.  ユーザーインターフェースのデザインを決定するため。

### 問題3

データフロー図（DFD）の主な役割として、最も適切なものはどれか。

1.  システム内の各コンポーネントのハードウェア構成を詳細に示すこと。
2.  システム内でデータがどのように生成、保存、処理、転送されるかを可視化すること。
3.  プログラムの実行順序や制御構造を詳細に表現すること。
4.  ネットワークの物理的な配線情報を記述すること。

### 問題4

システム設計において、セキュリティを考慮するタイミングとして最も適切なものはどれか。

1.  システム開発が完了し、リリース直前になったとき。
2.  運用開始後に、セキュリティインシデントが発生してから。
3.  設計の初期段階から、システムライフサイクルの全フェーズで継続的に考慮する。
4.  機能要件がすべて確定した後、非機能要件としてまとめて検討するとき。

### 問題5

ケーススタディで挙げられたオンライン書店システムの新機能開発において、ユーザーデータのプライバシー保護を確保するために講じるべき対応策として、最も重要なものはどれか。

1.  推薦アルゴリズムの精度を最優先し、データ収集量を最大化する。
2.  ユーザーデータへのアクセスを最小限に留め、暗号化を施し、厳格なアクセス権限管理を行う。
3.  推薦結果をすべてのユーザーで統一し、個別のデータ分析を避ける。
4.  プライバシー保護に関する法規制を無視し、技術的な実現可能性のみを追求する。

## 📋 今日のまとめ

*   システム設計は、機能要件と非機能要件の両方をバランス良く考慮することから始まる。
*   アーキテクチャ図、データフロー図は、システム全体の構造とデータの流れを理解・共有するために不可欠なツールである。
*   セキュリティは、設計の初期段階からライフサイクル全体を通じて継続的に考慮すべき重要な要素である。

### 次回予告

明日は「設計レビューと改善」について学習します。

## ✅ テスト回答・解説

### 問題1 正解：3

解説：機能要件はシステムが「何を」実行するか（例：ユーザー登録、検索）を定義します。一方、非機能要件はシステムが「どのように」動作するか、あるいは「どのような品質」を持つか（例：性能、可用性、セキュリティ）を定義します。選択肢1, 2, 4は、機能要件と非機能要件の定義を誤解しています。

### 問題2 正解：2

解説：システムアーキテクチャ図は、システムを構成する主要なコンポーネント（サーバ、DB、ミドルウェアなど）や、それらの間の連携・関係性を視覚