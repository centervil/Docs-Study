## 📚 今日の学習テーマ：ブラックボックステスト技法（状態遷移テスト）

### 📝 学習の目標

* 状態遷移テストの概念と目的を理解する。
* 状態遷移図を作成できるようになる。
* 有効および無効な状態遷移を特定できるようになる。

### 🔍 カバーする範囲

本日は、ブラックボックステスト技法の1つである状態遷移テストについて学習します。状態遷移テストの基本的な概念から、状態遷移図の作成、テストケースへの落とし込みまで、一連の流れを理解することを目指します。

## 📖 解説パート

### 状態遷移テストとは

状態遷移テストは、システムの状態とその状態間の遷移に着目したテスト技法です。システムが取りうる状態と、状態を変化させるイベント（入力や条件）をモデル化し、そのモデルに基づいてテストケースを作成します。複雑なシステムや、状態とイベントの組み合わせによって動作が変化するシステムに適しています。

状態遷移テストは、ソフトウェアが仕様通りに状態を遷移するかどうかを確認するために用いられます。状態遷移図を作成することで、システムの振る舞いを視覚的に把握しやすくなり、潜在的な欠陥を見つけ出すことができます。

### 状態遷移図の作成

状態遷移テストの中心となるのが状態遷移図です。状態遷移図は、システムの各状態をノード（円や長方形）で表し、状態間の遷移を矢印で表したものです。矢印には、遷移を引き起こすイベントや条件を記述します。

状態遷移図を作成する際には、以下の点に注意しましょう。

* **状態の定義:** システムが取りうる状態を明確に定義します。
* **イベントの定義:** 状態を遷移させるイベントを明確に定義します。
* **遷移の定義:** 各状態からどの状態へ、どのようなイベントで遷移するかを定義します。
* **初期状態と終了状態:** 初期状態（システム起動時の状態）と終了状態（システム終了時の状態）を明確に定義します。

状態遷移図を作成する例として、オンラインショッピングサイトのカート機能を考えてみましょう。

* **状態:** 空のカート、商品が入ったカート、決済待ち、決済完了
* **イベント:** 商品を追加、商品を削除、決済開始、決済完了、決済失敗

この例に基づいて状態遷移図を作成することで、カート機能の様々な状態と、その状態間の遷移を視覚的に表現できます。

#### 重要ポイント

* 状態遷移テストは、状態とイベントの組み合わせを網羅的にテストするのに適しています。
* 状態遷移図は、システムの振る舞いを視覚的に表現するのに役立ちます。
* 状態遷移テストは、複雑なシステムや組み込みシステムなど、状態を持つシステムに有効です。

## 🏢 ケーススタディ

### ケース：自動販売機の状態遷移テスト

ある自動販売機のソフトウェア開発チームは、新しく追加された「在庫切れ」状態のハンドリングに不安を感じていました。通常、自動販売機は「待機」「入金」「商品選択」「払い戻し」「商品払い出し」などの状態を持ちますが、在庫切れの場合の動作が複雑化していました。

#### 問題点

1.  在庫切れの商品が選択された場合のメッセージ表示が不適切。
2.  在庫切れの商品が選択された後、他の商品を選択できない。
3.  在庫切れの商品が選択された後、払い戻し処理が正常に行われない場合がある。

#### 対応策

1.  状態遷移図を作成し、「在庫切れ」状態と関連する遷移を明確化する。
2.  状態遷移図に基づいて、考えられるすべてのシナリオを網羅するテストケースを作成する。
3.  テスト自動化ツールを用いて、状態遷移テストを効率的に実施する。
4.  テスト結果を分析し、発見された欠陥を修正する。

#### ケースから学ぶ教訓

* 状態遷移テストは、複雑な状態を持つシステムのテストに非常に有効である。
* 状態遷移図を作成することで、潜在的な問題点を可視化できる。
* 早い段階で状態遷移テストを実施することで、手戻りを減らすことができる。

## 📝 理解度チェックテスト

以下の問題を解いて、今日の学習内容の理解度をチェックしましょう。

### 問題1

状態遷移テストで最も重要な要素は何ですか？

1.  テストケースの数を最大化すること
2.  状態遷移図を正確に作成すること
3.  テスト自動化ツールを導入すること
4.  テスト担当者の経験と勘

### 問題2

状態遷移図におけるノードは何を表していますか？

1.  状態間の遷移
2.  システムの状態
3.  テストケース
4.  入力データ

### 問題3

状態遷移テストが最も適しているシステムの例は何ですか？

1.  単純な計算を行うプログラム
2.  データベースへのアクセスを行うプログラム
3.  複雑な状態を持つ組み込みシステム
4.  Webサイトのデザイン

### 問題4

状態遷移テストのメリットとして正しくないものはどれですか？

1.  システムの振る舞いを視覚的に把握できる
2.  状態とイベントの組み合わせを網羅的にテストできる
3.  開発コストを大幅に削減できる
4.  潜在的な欠陥を見つけ出しやすい

### 問題5

状態遷移図を作成する際に注意すべきでないことはどれですか？

1.  状態の定義を明確にする
2.  イベントの定義を明確にする
3.  テスト担当者の好みに合わせて図を装飾する
4.  初期状態と終了状態を明確に定義する

## 📋 今日のまとめ

* 状態遷移テストは、状態と状態間の遷移に着目したテスト技法である。
* 状態遷移図は、システムの振る舞いを視覚的に表現するのに役立つ。
* 状態遷移テストは、複雑なシステムや組み込みシステムなど、状態を持つシステムに有効である。

### 次回予告

明日は「ブラックボックステスト技法（ユースケーステスト）」について学習します。

## ✅ テスト回答・解説

### 問題1 正解：2

解説：状態遷移テストでは、状態遷移図がテストケースを作成するための基礎となるため、正確な状態遷移図の作成が最も重要です。他の選択肢も重要ですが、状態遷移図の正確性がすべての基礎となります。（150-200字程度）

### 問題2 正解：2

解説：状態遷移図におけるノードは、システムが取りうる状態を表します。

### 問題3 正解：3

解説：状態遷移テストは、複雑な状態を持つ組み込みシステムなど、状態とイベントの組み合わせによって動作が変化するシステムに適しています。

### 問題4 正解：3

解説：状態遷移テストは、システムの品質向上に貢献しますが、開発コストを大幅に削減できるとは限りません。

### 問題5 正解：3

解説：状態遷移図は、テスト担当者の好みに合わせて図を装飾する必要はありません。重要なのは、状態、イベント、遷移を正確に表現することです。

## 📚 参考資料・リソース

* ISTQB Foundation Level シラバス
* ソフトウェアテストの技法（リック・スターク著）
* 状態遷移テストに関するWeb記事や論文
