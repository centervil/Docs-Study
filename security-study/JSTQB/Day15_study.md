
## 📚 今日の学習テーマ：ホワイトボックステスト技法（ステートメントカバレッジ、デシジョンカバレッジ）

### 📝 学習の目標

* ホワイトボックステストの目的と対象を理解する。
* ステートメントカバレッジの概念、計算方法、適用例を理解する。
* デシジョンカバレッジの概念、計算方法、適用例を理解する。

### 🔍 カバーする範囲

本日は、ソフトウェアテストにおけるホワイトボックステスト技法の重要な2つ、ステートメントカバレッジとデシジョンカバレッジについて学習します。これらの技法を用いることで、コードの網羅性を評価し、より効果的なテストを実施することができます。

## 📖 解説パート

### ホワイトボックステストの概要

ホワイトボックステストは、別名「構造テスト」とも呼ばれ、ソフトウェアの内部構造に着目したテスト技法です。ソースコードを直接見てテストケースを作成し、プログラムのロジックが正しく動作することを確認します。主に開発者が担当することが多く、単体テストや結合テストで用いられます。

ホワイトボックステストの主な目的は以下の通りです。

* コードの網羅性を高める
* 潜在的なバグを発見する
* コードの品質を向上させる

### ステートメントカバレッジ（命令網羅）

ステートメントカバレッジは、プログラム中の全ての命令文（ステートメント）を少なくとも一度は実行するテストケースを作成する技法です。カバレッジ率は、実行されたステートメント数を全体のステートメント数で割って算出します。

**ステートメントカバレッジ率 = (実行されたステートメント数 / 全ステートメント数) × 100%**

例えば、以下のようなコードがあったとします。

```java
public int calculate(int a, int b) {
  int result = 0;
  if (a > 0) {
    result = a + b;
  } else {
    result = a - b;
  }
  return result;
}
```

このコードのステートメントカバレッジ100%を達成するためには、`a > 0` が真となるケースと偽となるケースの両方をテストする必要があります。

### デシジョンカバレッジ（判定条件網羅）

デシジョンカバレッジは、プログラム中の全ての判定条件（デシジョン）の結果（真または偽）を少なくとも一度は実行するテストケースを作成する技法です。判定条件とは、`if`文や`while`文などの条件式のことです。カバレッジ率は、評価されたデシジョンの結果数を全体のデシジョンの結果数で割って算出します。

**デシジョンカバレッジ率 = (評価されたデシジョンの結果数 / 全デシジョンの結果数) × 100%**

上記の例で言えば、`a > 0` が真となるケースと偽となるケースをテストすることで、デシジョンカバレッジ100%を達成できます。

#### 重要ポイント

* ステートメントカバレッジとデシジョンカバレッジは、ホワイトボックステストの基本的な技法です。
* より高いカバレッジ率を目指すことで、潜在的なバグの発見に繋がります。
* これらの技法は、単体テストや結合テストにおいて特に有効です。

## 🏢 ケーススタディ

### ケース：オンラインバンキングシステムの入金処理

オンラインバンキングシステムの入金処理において、入金額が0円以下の場合にエラーメッセージを表示する機能を実装しました。

#### 問題点

* ステートメントカバレッジだけでは、入金額が0円の場合のエラー処理が正しく動作するかどうかを十分に検証できません。
* デシジョンカバレッジも考慮しないと、エラーメッセージの内容が適切であるかどうかの確認が不足する可能性があります。
* 極端な金額（非常に大きい金額など）に対するテストが不足している可能性があります。

#### 対応策

* 入金額が0円、マイナス、および正の金額の場合のテストケースを作成し、デシジョンカバレッジを100%にする。
* エラーメッセージの内容が適切であることを確認するテストケースを追加する。
* 上限を超える金額を入力した場合の動作をテストする。

#### ケースから学ぶ教訓

* ステートメントカバレッジだけでなく、デシジョンカバレッジも考慮することで、より網羅的なテストが可能です。
* 単なる網羅率だけでなく、テストケースの内容も重要です。
* 実際の運用を想定したテストケースを作成することで、潜在的なリスクを軽減できます。

## 📝 理解度チェックテスト

以下の問題を解いて、今日の学習内容の理解度をチェックしましょう。

### 問題1

以下のコードにおいて、ステートメントカバレッジ100%を達成するために、最低限必要なテストケース数はいくつですか？

```java
public boolean isEven(int num) {
  if (num % 2 == 0) {
    return true;
  } else {
    return false;
  }
}
```

1. 0
2. 1
3. 2
4. 3

### 問題2

デシジョンカバレッジとは、プログラムのどの部分の網羅率を測るものですか？

1. 全ての命令文
2. 全ての判定条件
3. 全ての変数
4. 全てのメソッド

### 問題3

ステートメントカバレッジ100%を達成しても、バグが残る可能性はありますか？

1. 絶対にない
2. 常に残る
3. 場合によってはある
4. 情報が不足しているため判断できない

### 問題4

ホワイトボックステストの主な目的は何ですか？

1. ユーザーインターフェースの検証
2. ソフトウェアの内部構造の検証
3. ソフトウェアのパフォーマンスの検証
4. ソフトウェアのセキュリティの検証

### 問題5

以下のうち、ホワイトボックステスト技法に該当するものはどれですか？

1. 同値分割
2. 境界値分析
3. デシジョンカバレッジ
4. ユースケーステスト

## 📋 今日のまとめ

* ホワイトボックステストは、ソフトウェアの内部構造に着目したテスト技法です。
* ステートメントカバレッジは、全ての命令文を少なくとも一度は実行するテストケースを作成する技法です。
* デシジョンカバレッジは、全ての判定条件の結果を少なくとも一度は実行するテストケースを作成する技法です。

### 次回予告

明日は「経験ベースの技法、テスト技法の選択」について学習します。

## ✅ テスト回答・解説

### 問題1 正解：3

解説：`num % 2 == 0`が真となるケースと偽となるケースの**2つ**のテストケースが必要です。ただし、引数なしでコンパイルエラーになるケースを考慮すると、コンパイルエラーになるケースも考慮する必要があるため、計**3つ**のテストケースが必要になります。

### 問題2 正解：2

解説：デシジョンカバレッジは、プログラム中の全ての判定条件（`if`文や`while`文などの条件式）の結果を網羅的にテストする技法です。

### 問題3 正解：3

解説：ステートメントカバレッジは、プログラムの全ての命令文を実行することを保証しますが、全てのバグを発見できるわけではありません。例えば、条件の組み合わせや境界値におけるバグは、ステートメントカバレッジだけでは発見できない場合があります。

### 問題4 正解：2

解説：ホワイトボックステストは、ソフトウェアの内部構造（ソースコード、設計など）に着目し、その構造に基づいてテストケースを作成し、検証を行います。

### 問題5 正解：3

解説：デシジョンカバレッジは、ソースコードの内部構造に基づいてテストケースを作成するため、ホワイトボックステスト技法に分類されます。同値分割、境界値分析、ユースケーステストは、ブラックボックステスト技法に分類されます。

## 📚 参考資料・リソース

* JSTQB Foundation Level シラバス
* ソフトウェアテストの技法
* 体系的に学ぶソフトウェアテスト